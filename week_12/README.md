# Week 13: Сериализация и хетерогенни контейнери

## Виртуални деструктори

Какво става когато:
```c++
class B : public A {
    // нетривиален конструктор и деструктор
};
// ...
A *a = new B();
delete a;
```

## Хетерогенни контейнери
```cpp
class B : public A;
class C : public A;
class D : public A;
// ...
std::vector<A*> As;
As.push_back(new B());
As.push_back(new C());
As.push_back(new D());
```

## Задача

Реализирайте инвентар на играч от ролева игра (клас `Inventory`) - контейнер за обекти, наследяващи интерфейса `Item`. Създайте класове `Consumable`, `Weapon`, `Armor` и `CraftingIngredient`, наследяващи `Item`. 
- `Item` да има член-данни име, тежест и описание.    
- `Consumable` да има член-данна 'хранителност'.
- `Weapon` да има член-данни durability $\in [0,1]$, attackPower >= 0 и attackType (ползвайте енъм-а от седмица 10).
- `Armor` да има член-данни durability $\in [0,1]$, protection >= 0 и списък с типовете вреда, срещу които защитата е ефективна.
- `CraftingIngredient` да има член-данни количество (цяло число), както и тежест за единица.

А сега за класа `Inventory`:
- Създайте методи `serialize(std::ostream&)` и `deserialize(std::istream&)`, които съответно записват и прочитат цялата информация за инвентара във поток.
- Създайте методи `addItem(Item *item)`, който добавя предмет в инвентара. (ще считаме, че след като предмет е добавен в инвентар, то е отговорност на инвентара да освободи паметта).
- Не позволявайте инвентара да се разширява над 100 килограма предмети. (хвърлете изключение)

Създайте инвентар, създайте предмети в него, запишете го във файл и го прочетете обратно. Напишете unit test чрез избрана от вас библиотека с цел лесно тестване.

### Бонус: 
Ако в инвентара вече има 5 диаманта (някакъв предмет от тип `CraftingIngredient`) и се опитаме да добавим още 5, да няма два отделни предмета, а само един "10-диамантов стек". Има много начини да постигнете подобен ефект. Бъдете креативни.

### Идеи като за проект: 
Използвайте класовете от седмица 10 и добавете инвентари на героите. (имплементацията не е тривиална)
- Инвентарът да държи информация за облечена броня и приготвено оръжие. (може характерните свойства на различните чудовища да се имитират чрез предмети в инвентарите)
- Създайте предмет 'седло' или 'дисаги', което позволява разширяване на инвентара.
- Добавете възможност броните да увеличават максималните точки живот на героя ако са облечени. Събличането на бронята трябва да ги премахва.
